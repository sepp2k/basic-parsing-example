<html>
  <head>
    <title>Basic Parser</title>
  </head>
  <body>
    <textarea id="source" rows=10 autofocus=true></textarea><br>
    <button id="shunting-yard">Parse using shunting yard!</button>
    <button id="recursive-descent">Parse using recursive descent!</button>
    <h4>Tokens:</h4>
    <pre id="token-area"></pre>
    <h4>AST:</h4>
    <pre id="ast-area"></pre>
    <h4>Errors:</h4>
    <pre id="error-area"></pre>
  </body>
  <script src="tokenizer.js"></script>
  <script src="shunting-yard.js"></script>
  <script src="recursive-descent.js"></script>
  <script>
    document.getElementById('shunting-yard').onclick = function() {
      document.getElementById('token-area').innerText = "";
      document.getElementById('ast-area').innerText = "";
      document.getElementById('error-area').innerText = "";

      let tokens = tokenize(document.getElementById('source').value);
      for (token of tokens) {
        document.getElementById('token-area').innerText += token.kind + ": '" + token.value + "'\n";
      }

      try {
        document.getElementById('ast-area').innerText = JSON.stringify(shuntingYard(tokens), null, 4);
      } catch (error) {
        document.getElementById('error-area').innerText = error;
      }
    };
    document.getElementById('recursive-descent').onclick = function() {
      document.getElementById('token-area').innerText = "";
      document.getElementById('ast-area').innerText = "";
      document.getElementById('error-area').innerText = "";

      let tokens = tokenize(document.getElementById('source').value);
      for (token of tokens) {
        document.getElementById('token-area').innerText += token.kind + ": '" + token.value + "'\n";
      }

      try {
        document.getElementById('ast-area').innerText = JSON.stringify(parseExpression(tokens), null, 4);
      } catch (error) {
        document.getElementById('error-area').innerText = error;
      }
    };
  </script>
</html>
